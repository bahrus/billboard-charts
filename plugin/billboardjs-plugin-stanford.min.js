/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * http://naver.github.io/billboard.js/
 * 
 * @version 1.9.4
 * @requires billboard.js
 * @summary billboard.js plugin
 */
!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3-array"),require("d3-interpolate"),require("d3-color"),require("d3-scale"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-format")):"function"==typeof define&&define.amd?define("stanford",["d3-array","d3-interpolate","d3-color","d3-scale","d3-selection","d3-brush","d3-axis","d3-format"],e):"object"==typeof exports?exports.stanford=e(require("d3-array"),require("d3-interpolate"),require("d3-color"),require("d3-scale"),require("d3-selection"),require("d3-brush"),require("d3-axis"),require("d3-format")):(t.bb=t.bb||{},t.bb.plugin=t.bb.plugin||{},t.bb.plugin.stanford=e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3))}(this,function(n,o,r,i,a,c,s,u){return(f={},__webpack_require__.m=l=[function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}},function(t,e,n){var o=n(3),r=n(4);t.exports=function _possibleConstructorReturn(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?r(t):e}},function(e,t){function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?e.exports=_typeof=function _typeof(t){return _typeof2(t)}:e.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(t)}e.exports=_typeof},function(t,e){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(e,t){function _getPrototypeOf(t){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}e.exports=_getPrototypeOf},function(t,e,n){var o=n(7);t.exports=function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}},function(n,t){function _setPrototypeOf(t,e){return n.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}n.exports=_setPrototypeOf},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e,n){var o=n(13),r=n(14),i=n(15);t.exports=function _toConsumableArray(t){return o(t)||r(t)||i()}},function(t,e){t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=a},function(t,e){t.exports=c},function(t,o,r){"use strict";r.r(o),function(t){r.d(o,"window",function(){return e}),r.d(o,"document",function(){return n});var e=bb(self)||bb(window)||bb(t)||bb(globalThis)||Function("return this")(),n=e&&e.document;function bb(t){return void 0!==t&&t}}.call(this,r(19))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=s},function(t,e){t.exports=u},function(t,e,n){"use strict";n.r(e);function Sb(t){return"function"==typeof t}function Tb(t){return"string"==typeof t}function Ub(t){return"number"==typeof t}function _b(t){return"object"===w()(t)}function ac(t){return function(t){return void 0===t}(t)||null===t||Tb(t)&&0===t.length||_b(t)&&!(t instanceof Date)&&0===Object.keys(t).length||Ub(t)&&isNaN(t)}function cc(t){return t&&t.constructor===Array}function dc(t){return t&&!t.nodeType&&_b(t)&&!cc(t)}var o,r=n(0),i=n.n(r),a=n(1),c=n.n(a),s=n(2),u=n.n(s),l=n(5),f=n.n(l),p=n(4),d=n.n(p),y=n(6),h=n.n(y),b=n(8),_=n(9),g=n(10),v=n(11),m="bb-tooltip",x="bb-tooltip-name",S=(n(12),n(3)),w=n.n(S),k=(n(16),n(17),n(18)),O=(o=function(n){for(var t=arguments.length,e=Array(1<t?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];if(!e.length||1===e.length&&!e[0])return n;var r=e.shift();return dc(n)&&dc(r)&&Object.keys(r).forEach(function(t){var e=r[t];dc(e)?(n[t]||(n[t]={}),n[t]=O(n[t],e)):n[t]=cc(e)?e.concat():e}),O.apply(void 0,[n].concat(e))},mergeObj.toString=function(){return o.toString()},mergeObj);!function(){try{new MouseEvent("t")}catch(t){return}}();function mergeObj(){return o.apply(this,arguments)}var C=n(20),j=n.n(C),P=function(){function Plugin(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i()(this,Plugin),this.options=t}return c()(Plugin,[{key:"$beforeInit",value:function $beforeInit(){}},{key:"$init",value:function $init(){}},{key:"$afterInit",value:function $afterInit(){}},{key:"$redraw",value:function $redraw(){}},{key:"$willDestroy",value:function $willDestroy(){var e=this;Object.keys(this).forEach(function(t){e[t]=null,delete e[t]})}}]),Plugin}();j()(P,"version","1.9.4");function Ec(){return i()(this,Ec),{colors:void 0,epochs:[],lines:[],scale_min:void 0,scale_max:void 0,scale_width:20,scale_format:void 0,padding_top:0,padding_right:0,padding_bottom:0,padding_left:0,regions:[]}}var E="bb-colorscale",q="bb-stanford-elements",$="bb-stanford-line",M="bb-stanford-lines",T="bb-stanford-region",A="bb-stanford-regions";function compareEpochs(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0}function getCentroid(t){for(var e,n=function getRegionArea(t){for(var e,n,o=0,r=0,i=t.length,a=i-1;r<i;a=r,r++)e=t[r],n=t[a],o+=e.x*n.y,o-=e.y*n.x;return o/=2}(t),o=0,r=0,i=0,a=t.length,c=a-1;i<a;c=i,i++){var s=t[i],u=t[c];e=s.x*u.y-u.x*s.y,o+=(s.x+u.x)*e,r+=(s.y+u.y)*e}return{x:o/(e=6*n),y:r/e}}var D=function(){function Elements(t){i()(this,Elements);var e=(this.owner=t).$$.main.select(".bb-chart").append("g").attr("class",q);e.append("g").attr("class",M),e.append("g").attr("class",A)}return c()(Elements,[{key:"updateStanfordLines",value:function updateStanfordLines(t){var e=this.owner.$$,n=e.main,o=e.config.axis_rotated,r=this.xvCustom.bind(e),i=this.yvCustom.bind(e),a=n.select(".".concat(M)).style("shape-rendering","geometricprecision").selectAll(".".concat($)).data(this.owner.config.lines);a.exit().transition().duration(t).style("opacity",0).remove();var c=a.enter().append("g");c.append("line").style("opacity",0),c.merge(a).attr("class",function(t){return $+(t.class?" ".concat(t.class):"")}).select("line").transition().duration(t).attr("x1",function(t){return o?i(t,"y1"):r(t,"x1")}).attr("x2",function(t){return o?i(t,"y2"):r(t,"x2")}).attr("y1",function(t){return o?r(t,"x1"):i(t,"y1")}).attr("y2",function(t){return o?r(t,"x2"):i(t,"y2")}).transition().style("opacity",1)}},{key:"updateStanfordRegions",value:function updateStanfordRegions(t){var e=this.owner.$$,n=e.main,o=e.config.axis_rotated,r=this.xvCustom.bind(e),i=this.yvCustom.bind(e),a=this.owner.countEpochsInRegion.bind(e),c=n.select(".".concat(A)).selectAll(".".concat(T)).data(this.owner.config.regions);c.exit().transition().duration(t).style("opacity",0).remove();var s=c.enter().append("g");s.append("polygon").style("opacity",0),s.append("text").attr("transform",o?"rotate(-90)":"").style("opacity",0),(c=s.merge(c)).attr("class",function(t){return T+(t.class?" ".concat(t.class):"")}).select("polygon").transition().duration(t).attr("points",function(t){return t.points.map(function(t){return[o?i(t,"y"):r(t,"x"),o?r(t,"x"):i(t,"y")].join(",")}).join(" ")}).transition().style("opacity",function(t){return t.opacity?t.opacity:.2}),c.select("text").transition().duration(t).attr("x",function(t){return o?i(getCentroid(t.points),"y"):r(getCentroid(t.points),"x")}).attr("y",function(t){return o?r(getCentroid(t.points),"x"):i(getCentroid(t.points),"y")}).text(function(t){if(t.text){var e=a(t.points),n=e.value,o=e.percentage;return t.text(n,o)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").transition().style("opacity",1)}},{key:"updateStanfordElements",value:function updateStanfordElements(t){var e=0<arguments.length&&void 0!==t?t:0;this.updateStanfordLines(e),this.updateStanfordRegions(e)}},{key:"xvCustom",value:function xvCustom(t,e){var n=this,o=e?t[e]:n.getBaseValue(t);return n.isTimeSeries()?o=n.parseDate(o):n.isCategorized()&&Tb(o)&&(o=n.config.axis_x_categories.indexOf(t.value)),Math.ceil(n.x(o))}},{key:"yvCustom",value:function yvCustom(t,e){var n=t.axis&&"y2"===t.axis?this.y2:this.y,o=e?t[e]:this.getBaseValue(t);return Math.ceil(n(o))}}]),Elements}(),I=n(21),R=n(22),F=function(){function ColorScale(t){i()(this,ColorScale),this.owner=t}return c()(ColorScale,[{key:"drawColorScale",value:function drawColorScale(){var t=this.owner.$$,e=this.owner.config,n=t.data.targets[0],o=t.height-e.padding_bottom-e.padding_top,r=e.scale_width,i=Object(b.range)(e.padding_bottom,o,5),a=Object(v.scaleSequential)(n.colors).domain([i[i.length-1],i[0]]);this.colorScale&&this.colorScale.remove(),this.colorScale=t.svg.append("g").attr("width",50).attr("height",o).attr("class",E),this.colorScale.append("g").attr("transform","translate(0, ".concat(e.padding_top,")")).selectAll("bars").data(i).enter().append("rect").attr("y",function(t,e){return 5*e}).attr("x",0).attr("width",r).attr("height",5).attr("fill",function(t){return a(t)});var c=Object(v.scaleLog)().domain([n.minEpochs,n.maxEpochs]).range([i[0]+e.padding_top+i[i.length-1]+5-1,i[0]+e.padding_top]),s=Object(I.axisRight)(c),u=e.scale_format;"pow10"===u?s.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):Sb(u)?s.tickFormat(u):s.tickFormat(Object(R.format)("d"));var l=this.colorScale.append("g").attr("class","legend axis").attr("transform","translate(".concat(r,",0)")).call(s);"pow10"===u&&l.selectAll(".tick text").text(null).filter(function(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))==1}).text(10).append("tspan").attr("dy","-.7em").text(function(t){return Math.round(Math.log(t)/Math.LN10)}),this.colorScale.attr("transform","translate(".concat(t.currentWidth-this.xForColorScale(),", 0)"))}},{key:"xForColorScale",value:function xForColorScale(){return this.owner.config.padding_right+this.colorScale.node().getBBox().width}},{key:"getColorScalePadding",value:function getColorScalePadding(){return this.xForColorScale()+this.owner.config.padding_left+20}}]),ColorScale}();n.d(e,"default",function(){return L});var L=function(t){function Stanford(t){var e;return i()(this,Stanford),(e=u()(this,f()(Stanford).call(this,t))).config=new Ec,u()(e,d()(e))}return h()(Stanford,t),c()(Stanford,[{key:"$beforeInit",value:function $beforeInit(){var t=this,e=this.$$;e.config.data_xSort=!1,e.isMultipleX=function(){return!0},e.showXGridFocus=function(){},e.labelishData=function(t){return t.values},e.opacityForCircle=function(){return 1};var n=e.getCurrentPaddingRight.bind(e);e.getCurrentPaddingRight=function(){return n()+(t.colorScale?t.colorScale.getColorScalePadding():0)}}},{key:"$init",value:function $init(){var t=this.$$;t.loadConfig.bind(this)(this.options),t.color=this.getStanfordPointColor.bind(t),this.colorScale=new F(this),this.elements=new D(this),this.convertData(),this.initStanfordData(),this.setStanfordTooltip(),this.colorScale.drawColorScale(),this.$redraw()}},{key:"$redraw",value:function $redraw(t){this.colorScale&&this.colorScale.drawColorScale(),this.elements&&this.elements.updateStanfordElements(t)}},{key:"getOptions",value:function getOptions(){return new Ec}},{key:"convertData",value:function convertData(){var t=this.$$.data.targets,n=this.options.epochs;t.forEach(function(t){t.values.forEach(function(t,e){t.epochs=n[e]}),t.minEpochs=void 0,t.maxEpochs=void 0,t.colors=void 0,t.colorscale=void 0})}},{key:"xvCustom",value:function xvCustom(t,e){var n=this,o=e?t[e]:n.getBaseValue(t);return n.isTimeSeries()?o=n.parseDate(o):n.isCategorized()&&Tb(o)&&(o=n.config.axis_x_categories.indexOf(t.value)),Math.ceil(n.x(o))}},{key:"yvCustom",value:function yvCustom(t,e){var n=t.axis&&"y2"===t.axis?this.y2:this.y,o=e?t[e]:this.getBaseValue(t);return Math.ceil(n(o))}},{key:"initStanfordData",value:function initStanfordData(){var t=this.config,e=this.$$.data.targets[0];e.values.sort(compareEpochs);var n=e.values.map(function(t){return t.epochs});e.minEpochs=isNaN(t.scale_min)?Object(b.min)(n):t.scale_min,e.maxEpochs=isNaN(t.scale_max)?Object(b.max)(n):t.scale_max,e.colors=Sb(t.colors)?t.colors:Object(_.interpolateHslLong)(Object(g.hsl)(250,1,.5),Object(g.hsl)(0,1,.5)),e.colorscale=Object(v.scaleSequentialLog)(e.colors).domain([e.minEpochs,e.maxEpochs])}},{key:"getStanfordPointColor",value:function getStanfordPointColor(t){return this.data.targets[0].colorscale(t.epochs)}},{key:"setStanfordTooltip",value:function setStanfordTooltip(){var t=this.$$.config;ac(t.tooltip_contents)&&(t.tooltip_contents=function(t,e,n,o){var r=this,i='<table class="'.concat(m,'"><tbody>');return t.forEach(function(t){i+="<tr>\n\t\t\t\t\t\t\t<th>".concat(e(r.config.data_x),'</th>\n\t\t\t\t\t\t\t<th class="value">').concat(n(t.x),"</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>").concat(e(t.id),'</th>\n\t\t\t\t\t\t\t<th class="value">').concat(n(t.value),'</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr class="').concat(x,"-").concat(t.id,'">\n\t\t\t\t\t\t\t<td class="name"><span style="background-color:').concat(o(t),'"></span>').concat(e("Epochs"),'</td>\n\t\t\t\t\t\t\t<td class="value">').concat(n(t.epochs),"</td>\n\t\t\t\t\t\t</tr>")}),"".concat(i,"</tbody></table>")})}},{key:"countEpochsInRegion",value:function countEpochsInRegion(n){var t=this.data.targets[0],e=t.values.reduce(function(t,e){return t+ +e.epochs},0),o=t.values.reduce(function(t,e){return function pointInRegion(t,e){for(var n=t.x,o=t.value,r=!1,i=0,a=e.length-1;i<e.length;a=i++){var c=e[i].x,s=e[i].y,u=e[a].x,l=e[a].y;o<s!=o<l&&n<(u-c)*(o-s)/(l-s)+c&&(r=!r)}return r}(e,n)?t+ +e.epochs:t},0);return{value:o,percentage:0===o?0:(o/e*100).toFixed(1)}}}]),Stanford}(P)}],__webpack_require__.c=f,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)__webpack_require__.d(n,o,function(t){return e[t]}.bind(null,o));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=23)).default;function __webpack_require__(t){if(f[t])return f[t].exports;var e=f[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}var l,f});