(function(){let a,b=document.head.querySelector('link[data-tag="billboard-charts"]');a=b?b.getAttribute('href'):document.currentScript.src;const c=document.createElement('template');if(c.innerHTML=`
    <style>
         :host {
            display: block;
        }
    </style>
    <div id="chartTarget"></div>`,!customElements.get('billboard-charts')){class b extends HTMLElement{constructor(){super(),this._cssLoaded=!1,this.attachShadow({mode:'open'}),this.shadowRoot.appendChild(c.content.cloneNode(!0))}get publish(){return this._publish}set publish(a){a?this.setAttribute('publish',''):this.removeAttribute('publish')}get cssPath(){return this._cssPath}set cssPath(a){this.setAttribute('css-path',a)}get d3Path(){return this._d3Path}set d3Path(a){this.setAttribute('d3-path',a)}get billboardLibPath(){return this._billboardLibPath}set billboardLibPath(a){this.setAttribute('billboard-lib-path',a)}get data(){return this._data}set data(a){this._data=a,this.onPropsChange()}get newData(){return this._newData}set newData(a){this._newData=a,this.onNewData()}get staleData(){return this._staleData}set staleData(a){this._staleData=a,this.onStaleData()}set selectedElement(a){this._selectedElement=a;const b=new CustomEvent('selected-element-changed',{detail:{value:a},bubbles:!0,composed:!0});this.dispatchEvent(b)}get selectedElement(){return this._selectedElement}static get observedAttributes(){return['publish','css-path','d3-path','billboard-lib-path','data','newData','staleData']}static get is(){return'billboard-charts'}_upgradeProperty(a){if(this.hasOwnProperty(a)){let b=this[a];delete this[a],this[a]=b}}attributeChangedCallback(a,b,c){'publish'===a?(this._publish=null!==c,this.onPropsChange()):this['_'+this.snakeToCamel(a)]=c}get chart(){return this._chart}absolute(a,b){var c=a.split('/'),d=b.split('/');c.pop();for(var e=0;e<d.length;e++)'.'!=d[e]&&('..'==d[e]?c.pop():c.push(d[e]));return c.join('/')}downloadJSFilesInParallelButLoadInSequence(a){return new Promise((b)=>{const c={},d=a.filter((a)=>null!==a);d.forEach((a)=>{c[a.src]=!0}),d.forEach((a)=>{const d=document.createElement('script');d.src=a.src,d.async=!1,d.onload=()=>{Object.keys(c).forEach((a)=>{if(d.src.endsWith(a))return void delete c[a]}),0===Object.keys(c).length&&b()},document.head.appendChild(d)})})}snakeToCamel(a){return a.replace(/(\-\w)/g,function(a){return a[1].toUpperCase()})}connectedCallback(){b.observedAttributes.forEach((a)=>{this._upgradeProperty(this.snakeToCamel(a))}),this.cssPath||(b.bbCcssSelector?this.cssPath=document.head.querySelector(b.bbCcssSelector).getAttribute('href'):this.cssPath=this.absolute(a,'billboard.min.css'));const c=[];'object'===typeof d3||this.d3Path||(this.d3Path=b.d3Selector?document.head.querySelector(b.d3Selector).getAttribute('href'):this.absolute(a,'d3.js'),c.push({src:this.d3Path})),'undefined'!==typeof bb||this.billboardLibPath||(this.billboardLibPath=b.billboardJsSelector?document.head.querySelector(b.billboardJsSelector).getAttribute('href'):this.absolute(a,'billboard.js'),c.push({src:this.billboardLibPath})),this.downloadJSFilesInParallelButLoadInSequence(c).then(()=>{this.onPropsChange()});const d=document.createElement('link');d.setAttribute('rel','stylesheet'),d.setAttribute('type','text/css'),d.setAttribute('href',this._cssPath),d.addEventListener('load',()=>{this._cssLoaded=!0,this.onPropsChange()}),this.shadowRoot.appendChild(d)}loaded(){this._cssLoaded=!0,setTimeout(()=>this.onPropsChange(),100)}onPropsChange(){this._cssLoaded&&this.publish&&this.data&&this.data.data&&'undefined'!==typeof bb&&(this.data.bindto=this.shadowRoot.getElementById('chartTarget'),!this.data.data.onclick&&(this.data.data.onclick=(a)=>{this.selectedElement=a}),this._chart?this._chart=bb.generate(this.data):(this._chart=bb.generate(this.data),this.newData&&this.onNewData()))}onNewData(){this.newData&&this._chart&&this._chart.load(this.newData)}onStaleData(){this.staleData&&this._chart&&this._chart.unload(this.staleData)}}customElements.define(b.is,b)}})();