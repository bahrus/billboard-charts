(function(){function a(a){return new Promise(function(b){var c={},d=a.filter(function(a){return null!==a});d.forEach(function(a){c[a.src]=!0}),d.forEach(function(a){var d=document.createElement('script');d.src=a.src,d.async=!1,d.onload=function(){Object.keys(c).forEach(function(a){if(d.src.endsWith(a))return void delete c[a]}),0===Object.keys(c).length&&b()},document.head.appendChild(d)})})}function b(){var a=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.attachShadow({mode:'open'}),a.shadowRoot.appendChild(c.content.cloneNode(!0)),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'publish',get:function(){return this._publish},set:function(a){a?this.setAttribute('publish',''):this.removeAttribute('publish')}},{key:'cssPath',get:function(){return this._cssPath},set:function(a){this.setAttribute('css-path',a)}},{key:'data',get:function(){return this._data},set:function(a){this._data=a,this.onPropsChange()}},{key:'newData',get:function(){return this._newData},set:function(a){this._newData=a,this.onNewData()}},{key:'staleData',get:function(){return this._staleData},set:function(a){this._staleData=a,this.onStaleData()}},{key:'selectedElement',set:function(a){this._selectedElement=a;var b=new CustomEvent('selected-element-changed',{detail:{value:a},bubbles:!0,composed:!0});this.dispatchEvent(b)},get:function(){return this._selectedElement}}],[{key:'observedAttributes',get:function(){return['publish','css-path','data','newData','staleData']}},{key:'is',get:function(){return'billboard-charts'}}]),babelHelpers.createClass(b,[{key:'_upgradeProperty',value:function(a){if(this.hasOwnProperty(a)){var b=this[a];delete this[a],this[a]=b}}},{key:'attributeChangedCallback',value:function(a,b,c){'publish'===a?(this._publish=null!==c,this.onPropsChange()):this['_'+this.snakeToCamel(a)]=c}},{key:'snakeToCamel',value:function(a){return a.replace(/(\-\w)/g,function(a){return a[1].toUpperCase()})}},{key:'connectedCallback',value:function(){var a=this;console.log('connectedCallback'),b.observedAttributes.forEach(function(b){a._upgradeProperty(a.snakeToCamel(b))}),this.cssPath||(this.cssPath=e+'/billboard.min.css');var c=document.createElement('link');c.setAttribute('rel','stylesheet'),c.setAttribute('type','text/css'),c.setAttribute('href',this._cssPath),c.addEventListener('load',function(){a.shadowRoot.getElementById('chartTarget').style.visibility='visible'}),this.shadowRoot.appendChild(c)}},{key:'onPropsChange',value:function(){var a=this;this.publish&&this.data&&this.data.data&&(this.data.bindto=this.shadowRoot.getElementById('chartTarget'),!this.data.data.onclick&&(this.data.data.onclick=function(b){a.selectedElement=b}),this._chart?this._chart=bb.generate(this.data):(this._chart=bb.generate(this.data),this.newData&&this.onNewData()))}},{key:'onNewData',value:function(){this.newData&&this._chart&&this._chart.load(this.newData)}},{key:'onStaleData',value:function(){this.staleData&&this._chart&&this._chart.unload(this.staleData)}},{key:'chart',get:function(){return this._chart}}]),b}(HTMLElement);customElements.define(a.is,a)}if(!customElements.get('billboard-charts')){var c=document.createElement('template');c.innerHTML='\n    <style>\n         :host {\n            display: block;\n        }\n    </style>\n    <div id="chartTarget" style="visibility:hidden"></div>';var d=self.billboard_charts?billboard_charts.href:document.currentScript.src,e=d.split('/').slice(0,-1).join('/'),f=[];if('object'!==('undefined'===typeof d3?'undefined':babelHelpers.typeof(d3))){var g=self._d3?_d3.href:e+'/d3.min.js';f.push({src:g})}if('undefined'===typeof bb){var h=self._bb?_bb.href:e+'/billboard.min.js';f.push({src:h})}a(f).then(function(){b()})}})();