(function(){if(customElements.get("billboard-charts"))return;var cs_src=self.billboard_charts?billboard_charts.href:document.currentScript.src;function downloadJSFilesInParallelButLoadInSequence(refs){return new Promise(function(resolve){var notLoadedYet={},nonNullRefs=refs.filter(function(ref){return null!==ref});nonNullRefs.forEach(function(ref){notLoadedYet[ref.src]=!0});nonNullRefs.forEach(function(ref){var script=document.createElement("script");script.src=ref.src;script.async=!1;script.onload=function(){Object.keys(notLoadedYet).forEach(function(key){if(script.src.endsWith(key)){delete notLoadedYet[key]}});if(0===Object.keys(notLoadedYet).length){resolve()}};document.head.appendChild(script)})})}var template=document.createElement("template"),base=cs_src.split("/").slice(0,-1).join("/"),refs=[];if("object"!==("undefined"===typeof d3?"undefined":babelHelpers.typeof(d3))){var d3Path=self._d3?_d3.href:base+"/d3.min.js";refs.push({src:d3Path})}if("undefined"===typeof bb){var bbPath=self._bb?_bb.href:base+"/billboard.min.js";refs.push({src:bbPath})}function loadCssPaths(links,css){if(0===links.length){template.innerHTML="\n            <style>\n                 :host {\n                    display: block;\n                }\n                ".concat(css.join(""),"\n            </style>\n            <div id=\"chartTarget\"></div>");downloadJSFiles();return}var link=links.pop();fetch(link.href,{credentials:"same-origin"}).then(function(resp){resp.text().then(function(txt){css.push(txt);loadCssPaths(links,css)})})}function loadCss(){var links=[].slice.call(document.head.querySelectorAll(".billboard.css"));if(0===links.length){links=[{href:"https://naver.github.io/billboard.js/release/latest/dist/billboard.min.css"}]}loadCssPaths(links,[])}if("loading"!==document.readyState){loadCss()}else{document.addEventListener("DOMContentLoaded",function(){loadCss()})}function downloadJSFiles(){downloadJSFilesInParallelButLoadInSequence(refs).then(function(){initBillboardCharts()})}var BillboardCharts=function(_HTMLElement){babelHelpers.inherits(BillboardCharts,_HTMLElement);babelHelpers.createClass(BillboardCharts,[{key:"publish",get:function get(){return this._publish},set:function set(val){if(val){this.setAttribute("publish","")}else{this.removeAttribute("publish")}}},{key:"data",get:function get(){return this._data},set:function set(val){this._data=val;this.onPropsChange()}},{key:"newData",get:function get(){return this._newData},set:function set(val){this._newData=val;this.onNewData()}},{key:"staleData",get:function get(){return this._staleData},set:function set(val){this._staleData=val;this.onStaleData()}},{key:"selectedElement",set:function set(val){this._selectedElement=val;var newEvent=new CustomEvent("selected-element-changed",{detail:{value:val},bubbles:!0,composed:!0});this.dispatchEvent(newEvent)},get:function get(){return this._selectedElement}}],[{key:"observedAttributes",get:function get(){return["publish","data","newData","staleData"]}},{key:"is",get:function get(){return"billboard-charts"}}]);function BillboardCharts(){var _this;babelHelpers.classCallCheck(this,BillboardCharts);_this=babelHelpers.possibleConstructorReturn(this,(BillboardCharts.__proto__||Object.getPrototypeOf(BillboardCharts)).call(this));_this.attachShadow({mode:"open"});_this.shadowRoot.appendChild(template.content.cloneNode(!0));return _this}babelHelpers.createClass(BillboardCharts,[{key:"_upgradeProperty",value:function _upgradeProperty(prop){if(this.hasOwnProperty(prop)){var value=this[prop];delete this[prop];this[prop]=value}}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){switch(name){case"publish":this._publish=null!==newValue;this.onPropsChange();break;default:this["_"+this.snakeToCamel(name)]=newValue;}}},{key:"snakeToCamel",value:function snakeToCamel(s){return s.replace(/(\-\w)/g,function(m){return m[1].toUpperCase()})}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;BillboardCharts.observedAttributes.forEach(function(attrib){_this2._upgradeProperty(_this2.snakeToCamel(attrib))})}},{key:"onPropsChange",value:function onPropsChange(){var _this3=this;if(!this.publish||!this.data||!this.data.data)return;this.data.bindto=this.shadowRoot.getElementById("chartTarget");if(!this.data.data.onclick){this.data.data.onclick=function(dataPoint){_this3.selectedElement=dataPoint}}if(!this._chart){this._chart=bb.generate(this.data);if(this.newData)this.onNewData()}else{this._chart=bb.generate(this.data)}}},{key:"onNewData",value:function onNewData(){if(this.newData&&this._chart){this._chart.load(this.newData)}}},{key:"onStaleData",value:function onStaleData(){if(this.staleData&&this._chart){this._chart.unload(this.staleData)}}},{key:"chart",get:function get(){return this._chart}}]);return BillboardCharts}(HTMLElement);function initBillboardCharts(){customElements.define(BillboardCharts.is,BillboardCharts)}})();